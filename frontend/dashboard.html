<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RL-A2A Live Dashboard</title>
    
    <!-- External Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    
    <style>
        :root {
            --bg-primary: #0d1117;
            --bg-secondary: #161b22;
            --text-primary: #c9d1d9;
            --accent-blue: #22a7f0;
            --accent-green: #28a745;
            --accent-red: #dc3545;
            --border-color: rgba(255, 255, 255, 0.1);
        }
        
        body {
            background-color: var(--bg-primary);
            color: var(--text-primary);
            font-family: 'Inter', sans-serif;
        }
        
        .card {
            background-color: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 1.5rem;
            transition: all 0.3s ease;
        }
        
        .card:hover {
            border-color: var(--accent-blue);
            box-shadow: 0 8px 32px rgba(34, 167, 240, 0.1);
        }
        
        .metric-card {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, rgba(34, 167, 240, 0.1) 100%);
        }
        
        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 8px;
        }
        
        .status-healthy { background-color: var(--accent-green); }
        .status-warning { background-color: #ffc107; }
        .status-error { background-color: var(--accent-red); }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .agent-card {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, rgba(40, 167, 69, 0.1) 100%);
            border-left: 4px solid var(--accent-green);
        }
        
        .plugin-card {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, rgba(255, 193, 7, 0.1) 100%);
            border-left: 4px solid #ffc107;
        }
    </style>
</head>
<body x-data="dashboard()">
    <!-- Header -->
    <header class="bg-gray-900 border-b border-gray-700 px-6 py-4">
        <div class="flex items-center justify-between">
            <div class="flex items-center space-x-4">
                <h1 class="text-2xl font-bold text-white">RL-A2A Live Dashboard</h1>
                <span class="status-indicator pulse" :class="systemHealth === 'healthy' ? 'status-healthy' : 'status-error'"></span>
                <span class="text-sm" x-text="systemHealth"></span>
            </div>
            <div class="flex items-center space-x-4">
                <button @click="refreshData()" class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg text-white transition-colors">
                    <span x-show="!loading">Refresh</span>
                    <span x-show="loading" class="animate-spin">‚ü≥</span>
                </button>
                <div class="text-sm text-gray-400">
                    Last updated: <span x-text="lastUpdated"></span>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-6 py-8">
        <!-- Metrics Overview -->
        <section class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
            <div class="metric-card card">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-400 text-sm">Active Sessions</p>
                        <p class="text-3xl font-bold text-white" x-text="metrics.activeSessions"></p>
                    </div>
                    <div class="text-4xl text-blue-500">üë•</div>
                </div>
            </div>
            
            <div class="metric-card card">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-400 text-sm">Events/Hour</p>
                        <p class="text-3xl font-bold text-white" x-text="metrics.eventsPerHour"></p>
                    </div>
                    <div class="text-4xl text-green-500">üìä</div>
                </div>
            </div>
            
            <div class="metric-card card">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-400 text-sm">Avg Response</p>
                        <p class="text-3xl font-bold text-white" x-text="metrics.avgResponseTime + 'ms'"></p>
                    </div>
                    <div class="text-4xl text-yellow-500">‚ö°</div>
                </div>
            </div>
            
            <div class="metric-card card">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-400 text-sm">Success Rate</p>
                        <p class="text-3xl font-bold text-white" x-text="metrics.successRate + '%'"></p>
                    </div>
                    <div class="text-4xl text-green-500">‚úÖ</div>
                </div>
            </div>
        </section>

        <!-- Charts Section -->
        <section class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
            <div class="card">
                <h3 class="text-xl font-semibold mb-4">Real-time Activity</h3>
                <canvas id="activityChart" width="400" height="200"></canvas>
            </div>
            
            <div class="card">
                <h3 class="text-xl font-semibold mb-4">Agent Usage</h3>
                <canvas id="agentChart" width="400" height="200"></canvas>
            </div>
        </section>

        <!-- Agent Marketplace -->
        <section class="mb-8">
            <div class="card">
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-xl font-semibold">Agent Marketplace</h3>
                    <button @click="showMarketplace = !showMarketplace" class="bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg text-white transition-colors">
                        <span x-show="!showMarketplace">Show Marketplace</span>
                        <span x-show="showMarketplace">Hide Marketplace</span>
                    </button>
                </div>
                
                <div x-show="showMarketplace" class="space-y-4">
                    <!-- Search Bar -->
                    <div class="flex space-x-4 mb-4">
                        <input type="text" x-model="searchQuery" placeholder="Search agents..." 
                               class="flex-1 bg-gray-800 border border-gray-600 rounded-lg px-4 py-2 text-white">
                        <select x-model="selectedCategory" class="bg-gray-800 border border-gray-600 rounded-lg px-4 py-2 text-white">
                            <option value="">All Categories</option>
                            <option value="conversational">Conversational</option>
                            <option value="analytics">Analytics</option>
                            <option value="development">Development</option>
                        </select>
                    </div>
                    
                    <!-- Agent Grid -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        <template x-for="agent in filteredAgents" :key="agent.id">
                            <div class="agent-card card">
                                <div class="flex items-start justify-between mb-3">
                                    <h4 class="font-semibold text-lg" x-text="agent.name"></h4>
                                    <span class="bg-green-600 text-white px-2 py-1 rounded text-xs" x-text="agent.version"></span>
                                </div>
                                <p class="text-gray-400 text-sm mb-3" x-text="agent.description"></p>
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center space-x-2">
                                        <span class="text-yellow-400">‚≠ê</span>
                                        <span x-text="agent.rating"></span>
                                        <span class="text-gray-500">‚Ä¢</span>
                                        <span class="text-gray-500" x-text="agent.downloads + ' downloads'"></span>
                                    </div>
                                    <button @click="installAgent(agent)" class="bg-blue-600 hover:bg-blue-700 px-3 py-1 rounded text-sm text-white transition-colors">
                                        Install
                                    </button>
                                </div>
                            </div>
                        </template>
                    </div>
                </div>
            </div>
        </section>

        <!-- Plugin System -->
        <section class="mb-8">
            <div class="card">
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-xl font-semibold">Plugin System</h3>
                    <button @click="showPlugins = !showPlugins" class="bg-yellow-600 hover:bg-yellow-700 px-4 py-2 rounded-lg text-white transition-colors">
                        <span x-show="!showPlugins">Show Plugins</span>
                        <span x-show="showPlugins">Hide Plugins</span>
                    </button>
                </div>
                
                <div x-show="showPlugins" class="space-y-4">
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        <template x-for="plugin in plugins" :key="plugin.name">
                            <div class="plugin-card card">
                                <div class="flex items-start justify-between mb-3">
                                    <h4 class="font-semibold" x-text="plugin.name"></h4>
                                    <div class="flex items-center space-x-2">
                                        <span class="status-indicator" :class="plugin.loaded ? 'status-healthy' : 'status-error'"></span>
                                        <span class="text-xs" x-text="plugin.status"></span>
                                    </div>
                                </div>
                                <p class="text-gray-400 text-sm mb-3" x-text="plugin.metadata.description"></p>
                                <div class="flex space-x-2">
                                    <button @click="togglePlugin(plugin)" 
                                            :class="plugin.loaded ? 'bg-red-600 hover:bg-red-700' : 'bg-green-600 hover:bg-green-700'"
                                            class="px-3 py-1 rounded text-sm text-white transition-colors">
                                        <span x-text="plugin.loaded ? 'Unload' : 'Load'"></span>
                                    </button>
                                    <button @click="reloadPlugin(plugin)" class="bg-blue-600 hover:bg-blue-700 px-3 py-1 rounded text-sm text-white transition-colors">
                                        Reload
                                    </button>
                                </div>
                            </div>
                        </template>
                    </div>
                </div>
            </div>
        </section>

        <!-- Analytics Insights -->
        <section>
            <div class="card">
                <h3 class="text-xl font-semibold mb-6">Performance Insights</h3>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div>
                        <h4 class="font-semibold mb-3">System Health</h4>
                        <div class="space-y-2">
                            <div class="flex items-center justify-between">
                                <span>Performance Score</span>
                                <span class="font-semibold" x-text="insights.performanceScore + '/100'"></span>
                            </div>
                            <div class="w-full bg-gray-700 rounded-full h-2">
                                <div class="bg-green-500 h-2 rounded-full transition-all duration-500" 
                                     :style="`width: ${insights.performanceScore}%`"></div>
                            </div>
                        </div>
                        
                        <div class="mt-4">
                            <h5 class="font-semibold mb-2">Alerts</h5>
                            <div x-show="insights.alerts.length === 0" class="text-green-500">‚úÖ All systems operational</div>
                            <template x-for="alert in insights.alerts" :key="alert">
                                <div class="bg-red-900 border border-red-700 rounded px-3 py-2 text-red-200 text-sm" x-text="alert"></div>
                            </template>
                        </div>
                    </div>
                    
                    <div>
                        <h4 class="font-semibold mb-3">Recommendations</h4>
                        <div class="space-y-2">
                            <template x-for="rec in insights.recommendations" :key="rec.description">
                                <div class="bg-blue-900 border border-blue-700 rounded px-3 py-2 text-blue-200 text-sm">
                                    <div class="font-semibold" x-text="rec.type"></div>
                                    <div x-text="rec.description"></div>
                                </div>
                            </template>
                        </div>
                        
                        <div class="mt-4">
                            <h5 class="font-semibold mb-2">Trends</h5>
                            <div class="space-y-1 text-sm">
                                <div>Most Used Agent: <span class="font-semibold" x-text="insights.trends.mostUsedAgent"></span></div>
                                <div>Peak Hour: <span class="font-semibold" x-text="insights.trends.peakHour + ':00'"></span></div>
                                <div>Growth Rate: <span class="font-semibold" x-text="insights.trends.growthRate + '%'"></span></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script>
        function dashboard() {
            return {
                loading: false,
                systemHealth: 'healthy',
                lastUpdated: new Date().toLocaleTimeString(),
                showMarketplace: false,
                showPlugins: false,
                searchQuery: '',
                selectedCategory: '',
                
                metrics: {
                    activeSessions: 42,
                    eventsPerHour: 1250,
                    avgResponseTime: 150,
                    successRate: 99.2
                },
                
                agents: [
                    {
                        id: 'chatbot-pro',
                        name: 'ChatBot Pro',
                        description: 'Advanced conversational AI agent with memory',
                        version: '2.1.0',
                        category: 'conversational',
                        rating: 4.8,
                        downloads: 1250
                    },
                    {
                        id: 'data-analyzer',
                        name: 'Data Analyzer',
                        description: 'Intelligent data analysis and visualization agent',
                        version: '1.5.2',
                        category: 'analytics',
                        rating: 4.6,
                        downloads: 890
                    },
                    {
                        id: 'code-assistant',
                        name: 'Code Assistant',
                        description: 'AI-powered coding companion and debugger',
                        version: '3.0.1',
                        category: 'development',
                        rating: 4.9,
                        downloads: 2100
                    }
                ],
                
                plugins: [
                    {
                        name: 'example_plugin',
                        loaded: true,
                        status: 'loaded',
                        metadata: {
                            description: 'Example plugin for demonstration',
                            version: '1.0.0'
                        }
                    },
                    {
                        name: 'security_plugin',
                        loaded: false,
                        status: 'available',
                        metadata: {
                            description: 'Enhanced security features',
                            version: '2.1.0'
                        }
                    }
                ],
                
                insights: {
                    performanceScore: 92,
                    alerts: [],
                    recommendations: [
                        {
                            type: 'Performance',
                            description: 'Consider implementing caching for high-traffic agents'
                        }
                    ],
                    trends: {
                        mostUsedAgent: 'ChatBot Pro',
                        peakHour: 14,
                        growthRate: 15.2
                    }
                },
                
                get filteredAgents() {
                    return this.agents.filter(agent => {
                        const matchesSearch = !this.searchQuery || 
                            agent.name.toLowerCase().includes(this.searchQuery.toLowerCase()) ||
                            agent.description.toLowerCase().includes(this.searchQuery.toLowerCase());
                        
                        const matchesCategory = !this.selectedCategory || 
                            agent.category === this.selectedCategory;
                        
                        return matchesSearch && matchesCategory;
                    });
                },
                
                async refreshData() {
                    this.loading = true;
                    
                    try {
                        // Simulate API calls
                        await new Promise(resolve => setTimeout(resolve, 1000));
                        
                        // Update metrics with some randomization
                        this.metrics.activeSessions = Math.floor(Math.random() * 20) + 35;
                        this.metrics.eventsPerHour = Math.floor(Math.random() * 500) + 1000;
                        this.metrics.avgResponseTime = Math.floor(Math.random() * 100) + 100;
                        
                        this.lastUpdated = new Date().toLocaleTimeString();
                        
                        // Update charts
                        this.updateCharts();
                        
                    } catch (error) {
                        console.error('Failed to refresh data:', error);
                        this.systemHealth = 'error';
                    } finally {
                        this.loading = false;
                    }
                },
                
                async installAgent(agent) {
                    try {
                        // Simulate installation
                        await new Promise(resolve => setTimeout(resolve, 500));
                        alert(`Agent "${agent.name}" installed successfully!`);
                    } catch (error) {
                        alert(`Failed to install agent: ${error.message}`);
                    }
                },
                
                async togglePlugin(plugin) {
                    try {
                        // Simulate plugin toggle
                        await new Promise(resolve => setTimeout(resolve, 300));
                        plugin.loaded = !plugin.loaded;
                        plugin.status = plugin.loaded ? 'loaded' : 'available';
                    } catch (error) {
                        alert(`Failed to toggle plugin: ${error.message}`);
                    }
                },
                
                async reloadPlugin(plugin) {
                    try {
                        // Simulate plugin reload
                        await new Promise(resolve => setTimeout(resolve, 500));
                        alert(`Plugin "${plugin.name}" reloaded successfully!`);
                    } catch (error) {
                        alert(`Failed to reload plugin: ${error.message}`);
                    }
                },
                
                updateCharts() {
                    // Update activity chart
                    if (window.activityChart) {
                        const newData = Array.from({length: 10}, () => Math.floor(Math.random() * 100));
                        window.activityChart.data.datasets[0].data = newData;
                        window.activityChart.update();
                    }
                    
                    // Update agent chart
                    if (window.agentChart) {
                        const newData = this.agents.map(() => Math.floor(Math.random() * 50) + 10);
                        window.agentChart.data.datasets[0].data = newData;
                        window.agentChart.update();
                    }
                },
                
                init() {
                    // Initialize charts
                    this.$nextTick(() => {
                        this.initCharts();
                        
                        // Auto-refresh every 30 seconds
                        setInterval(() => {
                            this.refreshData();
                        }, 30000);
                    });
                },
                
                initCharts() {
                    // Activity Chart
                    const activityCtx = document.getElementById('activityChart').getContext('2d');
                    window.activityChart = new Chart(activityCtx, {
                        type: 'line',
                        data: {
                            labels: Array.from({length: 10}, (_, i) => `${i}m ago`),
                            datasets: [{
                                label: 'Events',
                                data: Array.from({length: 10}, () => Math.floor(Math.random() * 100)),
                                borderColor: '#22a7f0',
                                backgroundColor: 'rgba(34, 167, 240, 0.1)',
                                tension: 0.4
                            }]
                        },
                        options: {
                            responsive: true,
                            plugins: {
                                legend: {
                                    labels: {
                                        color: '#c9d1d9'
                                    }
                                }
                            },
                            scales: {
                                x: {
                                    ticks: {
                                        color: '#c9d1d9'
                                    },
                                    grid: {
                                        color: 'rgba(255, 255, 255, 0.1)'
                                    }
                                },
                                y: {
                                    ticks: {
                                        color: '#c9d1d9'
                                    },
                                    grid: {
                                        color: 'rgba(255, 255, 255, 0.1)'
                                    }
                                }
                            }
                        }
                    });
                    
                    // Agent Usage Chart
                    const agentCtx = document.getElementById('agentChart').getContext('2d');
                    window.agentChart = new Chart(agentCtx, {
                        type: 'doughnut',
                        data: {
                            labels: this.agents.map(a => a.name),
                            datasets: [{
                                data: this.agents.map(() => Math.floor(Math.random() * 50) + 10),
                                backgroundColor: [
                                    '#22a7f0',
                                    '#28a745',
                                    '#ffc107',
                                    '#dc3545',
                                    '#6f42c1'
                                ]
                            }]
                        },
                        options: {
                            responsive: true,
                            plugins: {
                                legend: {
                                    labels: {
                                        color: '#c9d1d9'
                                    }
                                }
                            }
                        }
                    });
                }
            }
        }
    </script>
</body>
</html>