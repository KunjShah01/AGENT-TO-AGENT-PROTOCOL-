# MCP Integration Guide for RL-A2A\n\nThis guide explains how to add Model Context Protocol (MCP) support to your RL-A2A agent communication system.\n\n## What is MCP?\n\nModel Context Protocol (MCP) is an open protocol that enables AI assistants to securely connect with external data sources and tools. By adding MCP support to RL-A2A, you can:\n\n- Expose your agent communication tools to AI assistants\n- Enable natural language interaction with your agent system\n- Integrate with MCP-compatible clients like Claude Desktop, Cline, etc.\n- Create a bridge between conversational AI and your agent infrastructure\n\n## Architecture\n\n```\nMCP Client (Claude, Cline, etc.)\n        ↓ (MCP Protocol)\nMCP Server (mcp_server.py)\n        ↓ (HTTP/WebSocket)\nA2A Server (a2a_server.py)\n        ↓ (WebSocket)\nAgents (agent_a.py, etc.)\n```\n\n## Installation Steps\n\n### 1. Quick Setup (Recommended)\n\n```bash\n# Clone the repository\ngit clone https://github.com/KunjShah01/RL-A2A.git\ncd RL-A2A\n\n# Run the setup script\npython setup_mcp.py\n\n# Test the installation\npython test_mcp.py\n```\n\n### 2. Manual Setup\n\n```bash\n# Install MCP dependencies\npip install mcp>=1.0.0\npip install -r requirements-mcp.txt\n\n# Make start script executable (Unix/Mac)\nchmod +x start_mcp_server.py\n```\n\n## Usage\n\n### Starting the Servers\n\n1. **Start A2A Server:**\n   ```bash\n   uvicorn a2a_server:app --reload --port 8000\n   ```\n\n2. **Start MCP Server:**\n   ```bash\n   python start_mcp_server.py\n   ```\n\n### Connecting MCP Clients\n\nAdd this configuration to your MCP client:\n\n```json\n{\n  \"mcpServers\": {\n    \"rl-a2a\": {\n      \"command\": \"python\",\n      \"args\": [\"path/to/RL-A2A/mcp_server.py\"],\n      \"env\": {\n        \"A2A_SERVER_URL\": \"http://localhost:8000\"\n      }\n    }\n  }\n}\n```\n\n## Available Tools\n\n### 1. register_agent\n**Description:** Register a new agent with the A2A system\n\n**Parameters:**\n- `agent_id` (string): Unique identifier for the agent\n\n**Example Usage:**\n\"Register a new agent called 'explorer'\"\n\n### 2. send_agent_feedback\n**Description:** Send reinforcement learning feedback for agent actions\n\n**Parameters:**\n- `agent_id` (string): Agent providing feedback\n- `action_id` (string): Action being evaluated\n- `reward` (number): Reward value (-1.0 to 1.0)\n- `context` (object): Additional context (optional)\n\n**Example Usage:**\n\"Send positive feedback with reward 0.8 for agent 'explorer' action 'move_forward'\"\n\n### 3. create_agent_observation\n**Description:** Create observation messages for agent communication\n\n**Parameters:**\n- `agent_id` (string): Agent sending observation\n- `position` (object): x, y, z coordinates\n- `velocity` (object): x, y, z velocity vector\n- `emotion` (string): Emotional state (happy, sad, neutral, excited, angry)\n- `target_agent_id` (string): Target agent (optional)\n\n**Example Usage:**\n\"Create an observation for agent 'explorer' at position (10, 5, 0) with happy emotion\"\n\n### 4. start_a2a_server\n**Description:** Get commands to start the A2A server\n\n**Parameters:**\n- `port` (number): Server port (default: 8000)\n- `host` (string): Server host (default: localhost)\n\n**Example Usage:**\n\"Give me the command to start A2A server on port 8080\"\n\n## Available Resources\n\n### 1. a2a://agents\nInformation about currently active agents in the system\n\n### 2. a2a://models\nReinforcement learning models data and training progress\n\n### 3. a2a://communication\nAgent communication logs and message history\n\n## Example Interactions\n\nOnce your MCP client is connected, you can use natural language commands:\n\n1. **\"Register an agent called 'scout' with the A2A system\"**\n   - Uses `register_agent` tool\n   - Returns session ID and confirmation\n\n2. **\"Show me information about active agents\"**\n   - Reads `a2a://agents` resource\n   - Returns current agent status\n\n3. **\"Send reward 0.9 for agent 'scout' action 'explore_north' with context emotion happy\"**\n   - Uses `send_agent_feedback` tool\n   - Updates RL model with positive feedback\n\n4. **\"Create observation for agent 'scout' at position x=5 y=10 z=0 with neutral emotion\"**\n   - Uses `create_agent_observation` tool\n   - Generates formatted observation message\n\n## Troubleshooting\n\n### Common Issues\n\n1. **\"MCP module not found\"**\n   ```bash\n   pip install mcp>=1.0.0\n   ```\n\n2. **\"A2A server connection failed\"**\n   - Ensure A2A server is running on correct port\n   - Check firewall settings\n   - Verify server URL in configuration\n\n3. **\"Permission denied on start script\"**\n   ```bash\n   chmod +x start_mcp_server.py\n   ```\n\n4. **\"Invalid MCP configuration\"**\n   - Verify JSON syntax in `mcp_config.json`\n   - Check file paths in configuration\n   - Ensure Python executable is in PATH\n\n### Debug Mode\n\nRun with debug logging:\n```bash\nexport MCP_DEBUG=1\npython start_mcp_server.py\n```\n\n### Testing\n\nRun the test suite to verify installation:\n```bash\npython test_mcp.py\n```\n\n## Advanced Configuration\n\n### Custom Server URL\nSet environment variable:\n```bash\nexport A2A_SERVER_URL=\"http://your-server:8000\"\n```\n\n### Multiple Environments\nCreate environment-specific configs:\n```json\n{\n  \"mcpServers\": {\n    \"rl-a2a-dev\": {\n      \"command\": \"python\",\n      \"args\": [\"mcp_server.py\"],\n      \"env\": {\n        \"A2A_SERVER_URL\": \"http://localhost:8000\"\n      }\n    },\n    \"rl-a2a-prod\": {\n      \"command\": \"python\",\n      \"args\": [\"mcp_server.py\"],\n      \"env\": {\n        \"A2A_SERVER_URL\": \"https://your-prod-server.com\"\n      }\n    }\n  }\n}\n```\n\n## Next Steps\n\n1. **Extend Tools:** Add more MCP tools for your specific use cases\n2. **Custom Resources:** Create additional resources for monitoring\n3. **Authentication:** Add security features for production use\n4. **Scaling:** Implement load balancing for multiple A2A servers\n5. **Integration:** Connect with other MCP servers and tools\n\n## Support\n\nFor questions or issues:\n- Open an issue on GitHub\n- Check the test script output for diagnostic information\n- Review A2A server logs for connection issues\n\n## Contributing\n\nContributions to improve MCP integration are welcome:\n1. Fork the repository\n2. Create a feature branch\n3. Add tests for new functionality\n4. Submit a pull request\n\n---\n\n**Note:** This MCP integration is designed to be a starting point. You can extend it with additional tools, resources, and functionality specific to your agent communication needs."